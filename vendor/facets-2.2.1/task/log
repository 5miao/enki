#!/usr/bin/env ratch

# produce changelog

main :changelog do
  text = `svn log --xml`
  i = text.index("?>\n")
  text.insert(i+2, "\n" + '<?xml-stylesheet href="changelog.xsl" type="text/xsl" ?>')

  if dryrun?
    puts text
  else
    File.open('doc/log/changelog.xml') do |f|
      f << text
    end
  end
end
